<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf?.token}"/>
    <meta name="_csrf_header" th:content="${_csrf?.headerName}"/>
    <title>Dashboard - Attendance System</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" th:href="@{/css/variables.css}">
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<body>
    <!-- Navbar -->
    <div th:replace="~{layout/navbar :: navbar}"></div>
    
    <!-- Main Content -->
    <main class="content-wrapper">
        <div class="container">
            <!-- Welcome Banner -->
            <div class="welcome-banner">
                <h1>Welcome back, <span sec:authentication="name">User</span>! ðŸ‘‹</h1>
                <p>Here's your attendance overview for this month</p>
            </div>
            
            <!-- Statistics Cards -->
            <div class="stats-grid">
                <div class="stat-card primary">
                    <div class="stat-icon">ðŸ“…</div>
                    <div class="stat-value" id="total-days">45</div>
                    <div class="stat-label">Total Days</div>
                    <div class="stat-change positive">
                        <span>â†‘ 5 from last month</span>
                    </div>
                </div>
                
                <div class="stat-card success">
                    <div class="stat-icon">âœ“</div>
                    <div class="stat-value" id="present-days">38</div>
                    <div class="stat-label">Present Days</div>
                    <div class="stat-change positive">
                        <span>â†‘ 3 from last month</span>
                    </div>
                </div>
                
                <div class="stat-card error">
                    <div class="stat-icon">âœ—</div>
                    <div class="stat-value" id="absent-days">7</div>
                    <div class="stat-label">Absent Days</div>
                    <div class="stat-change negative">
                        <span>â†‘ 2 from last month</span>
                    </div>
                </div>
                
                <div class="stat-card info">
                    <div class="stat-icon">ðŸ“Š</div>
                    <div class="stat-value" id="attendance-percentage">84%</div>
                    <div class="stat-label">Attendance Rate</div>
                    <div class="stat-change positive">
                        <span>â†‘ 2% from last month</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <button class="btn btn-primary" id="mark-attendance-btn">
                        <span>âœ“</span>
                        <span>Mark Attendance</span>
                    </button>
                    <a href="/attendance" th:href="@{/attendance}" class="btn btn-secondary">
                        <span>ðŸ“‹</span>
                        <span>View All Records</span>
                    </a>
                    <a href="/profile" th:href="@{/profile}" class="btn btn-outline">
                        <span>ðŸ‘¤</span>
                        <span>My Profile</span>
                    </a>
                </div>
            </div>
            
            <!-- Recent Attendance Records -->
            <div class="attendance-section">
                <div class="section-header">
                    <h3>Recent Attendance</h3>
                    <div class="filter-controls">
                        <div class="date-filter">
                            <input type="date" id="start-date" aria-label="Start date">
                            <span>to</span>
                            <input type="date" id="end-date" aria-label="End date">
                        </div>
                        <button class="btn btn-sm btn-primary" id="apply-filter-btn">Apply</button>
                        <button class="btn btn-sm btn-outline" id="reset-filter-btn">Reset</button>
                    </div>
                </div>
                
                <div class="table-wrapper attendance-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="attendance-tbody">
                            <!-- Dynamic content loaded via JavaScript -->
                            <tr>
                                <td colspan="4" class="no-data">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="pagination">
                    <button id="prev-page" aria-label="Previous page">Previous</button>
                    <span class="page-info" id="page-info">Page 1 of 1</span>
                    <button id="next-page" aria-label="Next page">Next</button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="modal-backdrop hidden" style="display: none;">
        <div class="spinner"></div>
    </div>
    
    <!-- JavaScript -->
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/ajax-helper.js}"></script>
    <script th:src="@{/js/dashboard.js}"></script>
</body>
</html>
